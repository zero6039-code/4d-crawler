<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大马彩实时开奖</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f4f9; display: flex; justify-content: center; padding-top: 40px; margin: 0; }
        .card { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 350px; text-align: center; border: 1px solid #eee; }
        h2 { color: #333; margin-bottom: 5px; font-size: 22px; }
        .draw-info { font-size: 14px; color: #888; margin-bottom: 20px; background: #f8f8f8; padding: 5px; border-radius: 5px; }
        .prize-box { margin: 12px 0; padding: 15px; border-radius: 12px; background: #fffcfc; border: 1px solid #ffeaea; transition: transform 0.2s; }
        .prize-box:hover { transform: scale(1.02); }
        .prize-label { font-size: 14px; color: #777; font-weight: bold; }
        .prize-num { font-size: 36px; color: #d32f2f; font-weight: 900; display: block; letter-spacing: 2px; }
        .footer-note { font-size: 11px; color: #bbb; margin-top: 20px; }
        .status-dot { height: 8px; width: 8px; background-color: #4caf50; border-radius: 50%; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>大马彩 3+3D</h2>
        <div id="draw-date" class="draw-info">正在同步最新开奖...</div>
        
        <div class="prize-box">
            <span class="prize-label">首奖 FIRST PRIZE</span>
            <span id="p1" class="prize-num">----</span>
        </div>
        <div class="prize-box">
            <span class="prize-label">二奖 SECOND PRIZE</span>
            <span id="p2" class="prize-num">----</span>
        </div>
        <div class="prize-box">
            <span class="prize-label">三奖 THIRD PRIZE</span>
        </div>
        
        <p class="footer-note"><span class="status-dot"></span>系统每 30 秒自动检测数据</p>
    </div>

    <script>
        function fetchResult() {
            // t= 时间戳强制刷新缓存
            fetch('data.json?t=' + new Date().getTime())
                .then(res => res.json())
                .then(data => {
                    // 自动识别数据结构：如果是数组取第一个，如果是对象直接取
                    const result = Array.isArray(data) ? data[0] : data;
                    
                    if (result && (result.drawNo || result.DrawNo)) {
                        document.getElementById('draw-date').innerText = "期号 Draw No: " + (result.drawNo || result.DrawNo);
                        document.getElementById('p1').innerText = result.p1 || result.P1 || "----";
                        document.getElementById('p2').innerText = result.p2 || result.P2 || "----";
                        document.getElementById('p3').innerText = result.p3 || result.P3 || "----";
                    } else {
                        document.getElementById('draw-date').innerText = "等待官方公布结果...";
                    }
                })
                .catch(err => {
                    console.log("数据尚未就绪...");
                    document.getElementById('draw-date').innerText = "正在等待数据写入...";
                });
        }

        // 立即执行并开启定时器
        fetchResult();
        setInterval(fetchResult, 30000);
    </script>
</body>
</html>
